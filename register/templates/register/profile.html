{% extends 'layout.html' %}
{% block title %}{{ profile_user.username }}'s Profile{% endblock %}
{% block content %}
<section>
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-image">
                {% if profile_user.profile.profile_picture %}
                    <img src="{{ profile_user.profile.profile_picture.url }}" alt="{{ profile_user.username }}'s profile picture" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover;">
                {% else %}
                    <div style="width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 60px; color: white;">
                        {{ profile_user.username|first|upper }}
                    </div>
                {% endif %}
            </div>
            
            <div class="profile-info">
                <h1>{{ profile_user.username }}</h1>
                {% if profile_user.first_name or profile_user.last_name %}
                    <p style="font-size: 1.2em; color: #666;">{{ profile_user.get_full_name }}</p>
                {% endif %}
                
                {% if profile_user.profile.location %}
                    <p>üìç {{ profile_user.profile.location }}</p>
                {% endif %}
                
                {% if profile_user == request.user %}
                    <a href="{% url 'register:edit_profile' %}" class="btn-edit" style="margin-top: 10px; display: inline-block;">‚úèÔ∏è Edit Profile</a>
                {% endif %}
                
                <p style="color: #888; margin-top: 10px;">Member since {{ profile_user.date_joined|date:"F Y" }}</p>
            </div>
        </div>
        
        {% if profile_user.profile.bio %}
            <div class="profile-bio">
                <h3>About</h3>
                <p style="white-space: pre-line;">{{ profile_user.profile.bio }}</p>
            </div>
        {% endif %}
        
        {% if profile_user.profile.website or profile_user.profile.twitter or profile_user.profile.github %}
            <div class="profile-links">
                <h3>Links</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    {% if profile_user.profile.website %}
                        <a href="{{ profile_user.profile.website }}" target="_blank" rel="noopener noreferrer">üåê Website</a>
                    {% endif %}
                    {% if profile_user.profile.twitter %}
                        <a href="https://twitter.com/{{ profile_user.profile.twitter }}" target="_blank" rel="noopener noreferrer">üê¶ Twitter</a>
                    {% endif %}
                    {% if profile_user.profile.github %}
                        <a href="https://github.com/{{ profile_user.profile.github }}" target="_blank" rel="noopener noreferrer">üíª GitHub</a>
                    {% endif %}
                </div>
            </div>
        {% endif %}
        
        <div class="profile-posts">
            <h2>Posts ({{ post_count }})</h2>
            
            {% if posts %}
                <div class="posts-grid">
                    {% for post in posts %}
                    <article style="margin-bottom: 30px;">
                        {% if post.banner %}
                            <a href="{% url 'posts:page' slug=post.slug %}">
                                <img src="{{ post.banner.url }}" alt="{{ post.title }}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 10px;">
                            </a>
                        {% endif %}
                        <h3>
                            <a href="{% url 'posts:page' slug=post.slug %}">{{ post.title }}</a>
                        </h3>
                        <p>{{ post.body|truncatewords:30 }}</p>
                        <div class="post-meta">
                            <span class="post-date">{{ post.date|date:"F d, Y" }}</span>
                        </div>
                    </article>
                    {% endfor %}
                </div>
            {% else %}
                <p>No posts yet.</p>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

